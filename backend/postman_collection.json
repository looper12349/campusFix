{
  "info": {
    "name": "Campus FixIt API",
    "description": "API collection for testing Campus FixIt backend endpoints",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:5000",
      "type": "string"
    },
    {
      "key": "studentToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "adminToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "issueId",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health Check",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": ["{{baseUrl}}"],
              "path": ["health"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Register Student",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('studentToken', jsonData.data.token);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"John Student\",\n    \"email\": \"student@campus.edu\",\n    \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "register"]
            }
          },
          "response": []
        },
        {
          "name": "Register Admin",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('adminToken', jsonData.data.token);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Admin User\",\n    \"email\": \"admin@campus.edu\",\n    \"password\": \"admin123\",\n    \"role\": \"admin\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "register"]
            }
          },
          "response": []
        },
        {
          "name": "Login Student",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('studentToken', jsonData.data.token);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"student@campus.edu\",\n    \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "login"]
            }
          },
          "response": []
        },
        {
          "name": "Login Admin",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('adminToken', jsonData.data.token);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"admin@campus.edu\",\n    \"password\": \"admin123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "login"]
            }
          },
          "response": []
        },
        {
          "name": "Get Profile (Student)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{studentToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/profile",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "profile"]
            }
          },
          "response": []
        },
        {
          "name": "Register - Invalid Email",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Test User\",\n    \"email\": \"invalid-email\",\n    \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "register"]
            }
          },
          "response": []
        },
        {
          "name": "Register - Short Password",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Test User\",\n    \"email\": \"test@campus.edu\",\n    \"password\": \"123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "register"]
            }
          },
          "response": []
        },
        {
          "name": "Login - Invalid Credentials",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"student@campus.edu\",\n    \"password\": \"wrongpassword\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "login"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Issues - Student",
      "item": [
        {
          "name": "Create Issue (Electrical)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('issueId', jsonData.data.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{studentToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"title\": \"Broken Light in Library\",\n    \"description\": \"The ceiling light in the main reading area of the library is flickering and needs replacement.\",\n    \"category\": \"Electrical\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/issues",
              "host": ["{{baseUrl}}"],
              "path": ["api", "issues"]
            }
          },
          "response": []
        },
        {
          "name": "Create Issue (Water)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{studentToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"title\": \"Leaking Faucet in Dorm\",\n    \"description\": \"The bathroom faucet in Room 302 has been leaking for 3 days.\",\n    \"category\": \"Water\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/issues",
              "host": ["{{baseUrl}}"],
              "path": ["api", "issues"]
            }
          },
          "response": []
        },
        {
          "name": "Create Issue (Internet)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{studentToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"title\": \"WiFi Not Working in Computer Lab\",\n    \"description\": \"The WiFi connection in Computer Lab B has been down since yesterday morning.\",\n    \"category\": \"Internet\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/issues",
              "host": ["{{baseUrl}}"],
              "path": ["api", "issues"]
            }
          },
          "response": []
        },
        {
          "name": "Create Issue (Infrastructure)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{studentToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"title\": \"Broken Window in Cafeteria\",\n    \"description\": \"One of the windows near the entrance of the cafeteria is cracked and needs repair.\",\n    \"category\": \"Infrastructure\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/issues",
              "host": ["{{baseUrl}}"],
              "path": ["api", "issues"]
            }
          },
          "response": []
        },
        {
          "name": "Create Issue with Image",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{studentToken}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "title",
                  "value": "Pothole in Parking Lot",
                  "type": "text"
                },
                {
                  "key": "description",
                  "value": "Large pothole near parking spot A15 that could damage vehicles.",
                  "type": "text"
                },
                {
                  "key": "category",
                  "value": "Infrastructure",
                  "type": "text"
                },
                {
                  "key": "image",
                  "type": "file",
                  "src": ""
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/issues",
              "host": ["{{baseUrl}}"],
              "path": ["api", "issues"]
            }
          },
          "response": []
        },
        {
          "name": "Get My Issues",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{studentToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/issues/my",
              "host": ["{{baseUrl}}"],
              "path": ["api", "issues", "my"]
            }
          },
          "response": []
        },
        {
          "name": "Get My Issues - Filter by Category",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{studentToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/issues/my?category=Electrical",
              "host": ["{{baseUrl}}"],
              "path": ["api", "issues", "my"],
              "query": [
                {
                  "key": "category",
                  "value": "Electrical"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get My Issues - Filter by Status",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{studentToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/issues/my?status=Open",
              "host": ["{{baseUrl}}"],
              "path": ["api", "issues", "my"],
              "query": [
                {
                  "key": "status",
                  "value": "Open"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get My Issues - Combined Filters",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{studentToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/issues/my?category=Electrical&status=Open",
              "host": ["{{baseUrl}}"],
              "path": ["api", "issues", "my"],
              "query": [
                {
                  "key": "category",
                  "value": "Electrical"
                },
                {
                  "key": "status",
                  "value": "Open"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Issue by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{studentToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/issues/{{issueId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "issues", "{{issueId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Create Issue - Missing Title",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{studentToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"description\": \"Some description\",\n    \"category\": \"Electrical\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/issues",
              "host": ["{{baseUrl}}"],
              "path": ["api", "issues"]
            }
          },
          "response": []
        },
        {
          "name": "Create Issue - Invalid Category",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{studentToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"title\": \"Test Issue\",\n    \"description\": \"Some description\",\n    \"category\": \"InvalidCategory\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/issues",
              "host": ["{{baseUrl}}"],
              "path": ["api", "issues"]
            }
          },
          "response": []
        },
        {
          "name": "Student - Get All Issues (Should Fail)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{studentToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/issues",
              "host": ["{{baseUrl}}"],
              "path": ["api", "issues"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Issues - Admin",
      "item": [
        {
          "name": "Get All Issues",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/issues",
              "host": ["{{baseUrl}}"],
              "path": ["api", "issues"]
            }
          },
          "response": []
        },
        {
          "name": "Get All Issues - Filter by Category",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/issues?category=Water",
              "host": ["{{baseUrl}}"],
              "path": ["api", "issues"],
              "query": [
                {
                  "key": "category",
                  "value": "Water"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get All Issues - Filter by Status",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/issues?status=Open",
              "host": ["{{baseUrl}}"],
              "path": ["api", "issues"],
              "query": [
                {
                  "key": "status",
                  "value": "Open"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Issue Status - In Progress",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"status\": \"In Progress\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/issues/{{issueId}}/status",
              "host": ["{{baseUrl}}"],
              "path": ["api", "issues", "{{issueId}}", "status"]
            }
          },
          "response": []
        },
        {
          "name": "Update Issue Status - Resolved",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"status\": \"Resolved\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/issues/{{issueId}}/status",
              "host": ["{{baseUrl}}"],
              "path": ["api", "issues", "{{issueId}}", "status"]
            }
          },
          "response": []
        },
        {
          "name": "Update Issue Status - Invalid Status",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"status\": \"InvalidStatus\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/issues/{{issueId}}/status",
              "host": ["{{baseUrl}}"],
              "path": ["api", "issues", "{{issueId}}", "status"]
            }
          },
          "response": []
        },
        {
          "name": "Add Remark to Issue",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"text\": \"Maintenance team has been notified. Expected fix within 24 hours.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/issues/{{issueId}}/remarks",
              "host": ["{{baseUrl}}"],
              "path": ["api", "issues", "{{issueId}}", "remarks"]
            }
          },
          "response": []
        },
        {
          "name": "Add Another Remark",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"text\": \"Issue has been resolved. Please verify and confirm.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/issues/{{issueId}}/remarks",
              "host": ["{{baseUrl}}"],
              "path": ["api", "issues", "{{issueId}}", "remarks"]
            }
          },
          "response": []
        },
        {
          "name": "Add Remark - Empty Text",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"text\": \"\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/issues/{{issueId}}/remarks",
              "host": ["{{baseUrl}}"],
              "path": ["api", "issues", "{{issueId}}", "remarks"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Error Cases",
      "item": [
        {
          "name": "No Token - Protected Route",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/issues/my",
              "host": ["{{baseUrl}}"],
              "path": ["api", "issues", "my"]
            }
          },
          "response": []
        },
        {
          "name": "Invalid Token",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer invalid.token.here"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/issues/my",
              "host": ["{{baseUrl}}"],
              "path": ["api", "issues", "my"]
            }
          },
          "response": []
        },
        {
          "name": "Student Update Status (Should Fail)",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{studentToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"status\": \"Resolved\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/issues/{{issueId}}/status",
              "host": ["{{baseUrl}}"],
              "path": ["api", "issues", "{{issueId}}", "status"]
            }
          },
          "response": []
        },
        {
          "name": "Student Add Remark (Should Fail)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{studentToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"text\": \"Student trying to add remark\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/issues/{{issueId}}/remarks",
              "host": ["{{baseUrl}}"],
              "path": ["api", "issues", "{{issueId}}", "remarks"]
            }
          },
          "response": []
        },
        {
          "name": "Issue Not Found",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{studentToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/issues/507f1f77bcf86cd799439011",
              "host": ["{{baseUrl}}"],
              "path": ["api", "issues", "507f1f77bcf86cd799439011"]
            }
          },
          "response": []
        },
        {
          "name": "Invalid Issue ID Format",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{studentToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/issues/invalid-id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "issues", "invalid-id"]
            }
          },
          "response": []
        }
      ]
    }
  ]
}
